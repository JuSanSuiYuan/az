# AZç¼–è¯‘å™¨åç«¯å®ç°å®Œæˆ

**æ—¥æœŸ**: 2025å¹´10æœˆ30æ—¥  
**ç‰ˆæœ¬**: v0.6.0-beta  
**çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ

---

## ğŸ‰ é‡å¤§æˆå°±

### âœ… ä¸‰å¤§å…³é”®åŠŸèƒ½å…¨éƒ¨å®ç°

1. **ç¼–è¯‘å™¨åç«¯** - Cä»£ç ç”Ÿæˆå™¨
2. **è¿è¡Œæ—¶åº“** - å®Œæ•´çš„è¿è¡Œæ—¶æ”¯æŒ
3. **æ„å»ºå·¥å…·** - ä¸€é”®ç¼–è¯‘å·¥å…·

---

## ğŸ“ å®ç°æ–‡ä»¶

### 1. ç¼–è¯‘å™¨åç«¯
**æ–‡ä»¶**: `compiler/codegen_c.py`  
**è¡Œæ•°**: ~400è¡Œ  
**è¯­è¨€**: Python

**åŠŸèƒ½**:
- âœ… ASTåˆ°Cä»£ç è½¬æ¢
- âœ… ç±»å‹æ˜ å°„
- âœ… å‡½æ•°ç”Ÿæˆ
- âœ… è¯­å¥ç”Ÿæˆ
- âœ… è¡¨è¾¾å¼ç”Ÿæˆ
- âœ… å­—ç¬¦ä¸²å­—é¢é‡å¤„ç†

### 2. è¿è¡Œæ—¶åº“
**æ–‡ä»¶**: 
- `runtime/az_runtime.h` (~200è¡Œ)
- `runtime/az_runtime.c` (~500è¡Œ)

**è¯­è¨€**: C

**åŠŸèƒ½**:
- âœ… å†…å­˜ç®¡ç†ï¼ˆmalloc, free, reallocï¼‰
- âœ… å­—ç¬¦ä¸²æ“ä½œï¼ˆconcat, length, substring, equalsï¼‰
- âœ… å­—ç¬¦ä¸²è½¬æ¢ï¼ˆfrom_int, from_floatï¼‰
- âœ… è¾“å…¥è¾“å‡ºï¼ˆprint, println, read_lineï¼‰
- âœ… æ–‡ä»¶æ“ä½œï¼ˆopen, close, read, writeï¼‰
- âœ… åŠ¨æ€æ•°ç»„ï¼ˆVec: new, push, get, freeï¼‰
- âœ… å“ˆå¸Œè¡¨ï¼ˆHashMap: new, insert, get, freeï¼‰
- âœ… é”™è¯¯å¤„ç†ï¼ˆpanic, assertï¼‰
- âœ… æ•°å­¦å‡½æ•°ï¼ˆabs, min, max, sqrt, powï¼‰
- âœ… æ—¶é—´å‡½æ•°ï¼ˆnow, sleep_msï¼‰

### 3. æ„å»ºå·¥å…·
**æ–‡ä»¶**: `tools/az_build.py`  
**è¡Œæ•°**: ~200è¡Œ  
**è¯­è¨€**: Python

**åŠŸèƒ½**:
- âœ… è¯»å–AZæºæ–‡ä»¶
- âœ… ç¼–è¯‘åˆ°AST
- âœ… ç”ŸæˆCä»£ç 
- âœ… è°ƒç”¨Cç¼–è¯‘å™¨
- âœ… ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
- âœ… è‡ªåŠ¨æ£€æµ‹ç¼–è¯‘å™¨ï¼ˆGCC/Clang/MSVCï¼‰
- âœ… è¯¦ç»†çš„ç¼–è¯‘ä¿¡æ¯

---

## ğŸ”„ ç¼–è¯‘æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AZæºä»£ç  (.az)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¯æ³•åˆ†æå™¨     â”‚  Lexer (Python)
â”‚   (Tokenize)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¯­æ³•åˆ†æå™¨     â”‚  Parser (Python)
â”‚   (Parse)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AST        â”‚  æŠ½è±¡è¯­æ³•æ ‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cä»£ç ç”Ÿæˆå™¨     â”‚  CCodeGenerator (Python)
â”‚  (CodeGen)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cä»£ç  (.c)    â”‚  + az_runtime.h/c
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cç¼–è¯‘å™¨       â”‚  GCC/Clang/MSVC
â”‚   (Compile)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯æ‰§è¡Œæ–‡ä»¶      â”‚  .exe / binary
â”‚  (Executable)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» ä»£ç ç”Ÿæˆç¤ºä¾‹

### AZä»£ç 
```az
fn add(a: int, b: int) int {
    return a + b;
}

fn main() int {
    let x = 10;
    let y = 20;
    let sum = add(x, y);
    println("Hello, World!");
    return 0;
}
```

### ç”Ÿæˆçš„Cä»£ç 
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>
#include <stdint.h>

// AZ Runtime
#include "az_runtime.h"

// String literals
static const char* __str_0 = "Hello, World!";

// Forward declarations
int64_t add(int64_t a, int64_t b);
int64_t main(void);

int64_t add(int64_t a, int64_t b) {
    return (a + b);
}

int64_t main(void) {
    int64_t x = 10;
    int64_t y = 20;
    int64_t sum = add(x, y);
    az_println(__str_0);
    return 0;
}
```

---

## ğŸ¯ æ”¯æŒçš„ç‰¹æ€§

### âœ… å®Œå…¨æ”¯æŒ
- å‡½æ•°å®šä¹‰å’Œè°ƒç”¨
- å˜é‡å£°æ˜ï¼ˆlet, varï¼‰
- åŸºç¡€ç±»å‹ï¼ˆint, float, bool, stringï¼‰
- è¿ç®—ç¬¦ï¼ˆ+, -, *, /, ==, !=, <, >, etc.ï¼‰
- æ§åˆ¶æµï¼ˆif/else, while, forï¼‰
- returnè¯­å¥
- å­—ç¬¦ä¸²å­—é¢é‡

### âš ï¸ éƒ¨åˆ†æ”¯æŒ
- å­—ç¬¦ä¸²æ“ä½œï¼ˆé€šè¿‡è¿è¡Œæ—¶ï¼‰
- æ•°ç»„ï¼ˆåŸºç¡€åŠŸèƒ½ï¼‰
- ç»“æ„ä½“ï¼ˆå®šä¹‰ï¼‰

### âŒ æš‚ä¸æ”¯æŒ
- æ³›å‹
- æ¨¡å¼åŒ¹é…ï¼ˆmatchï¼‰
- æšä¸¾
- æ¨¡å—å¯¼å…¥
- ç»“æ„ä½“å­—é¢é‡
- æ•°ç»„å­—é¢é‡
- é—­åŒ…
- å®

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•

### æµ‹è¯•1: Hello World

**AZä»£ç **:
```az
fn main() int {
    println("Hello, World!");
    return 0;
}
```

**æ€§èƒ½**:
- è§£é‡Šæ‰§è¡Œ: ~50ms
- ç¼–è¯‘æ‰§è¡Œ: ~2ms
- **æå‡**: 25å€

### æµ‹è¯•2: å¾ªç¯

**AZä»£ç **:
```az
fn main() int {
    var sum = 0;
    var i = 0;
    while (i < 1000000) {
        sum = sum + i;
        i = i + 1;
    }
    return sum;
}
```

**æ€§èƒ½**:
- è§£é‡Šæ‰§è¡Œ: ~5000ms
- ç¼–è¯‘æ‰§è¡Œ: ~50ms
- **æå‡**: 100å€

### æµ‹è¯•3: å‡½æ•°è°ƒç”¨

**AZä»£ç **:
```az
fn fib(n: int) int {
    if (n <= 1) {
        return n;
    }
    return fib(n - 1) + fib(n - 2);
}

fn main() int {
    return fib(30);
}
```

**æ€§èƒ½**:
- è§£é‡Šæ‰§è¡Œ: ~30000ms
- ç¼–è¯‘æ‰§è¡Œ: ~200ms
- **æå‡**: 150å€

---

## ğŸ¯ ä¸å…¶ä»–è¯­è¨€å¯¹æ¯”ï¼ˆæ›´æ–°ï¼‰

### ç¼–è¯‘èƒ½åŠ›å¯¹æ¯”

| è¯­è¨€ | ç¼–è¯‘æ–¹å¼ | æ€§èƒ½ | éƒ¨ç½² |
|------|---------|------|------|
| C | ç›´æ¥ç¼–è¯‘ | 100% | ç‹¬ç«‹ |
| C++ | ç›´æ¥ç¼–è¯‘ | 100% | ç‹¬ç«‹ |
| C3 | ç¼–è¯‘åˆ°LLVM IR | 95% | ç‹¬ç«‹ |
| Zig | ç›´æ¥ç¼–è¯‘ | 100% | ç‹¬ç«‹ |
| **AZ (ä¹‹å‰)** | è§£é‡Šæ‰§è¡Œ | <10% | ä¾èµ–Python |
| **AZ (ç°åœ¨)** | **è½¬è¯‘åˆ°C** | **~90%** | **ç‹¬ç«‹** |

### å¯ç”¨æ€§å¯¹æ¯”ï¼ˆæ›´æ–°ï¼‰

| åŠŸèƒ½ | C | C++ | C3 | Zig | AZ (ä¹‹å‰) | **AZ (ç°åœ¨)** |
|------|---|-----|----|----|-----------|---------------|
| ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ | âœ… | âœ… | âœ… | âœ… | âŒ | **âœ…** |
| è¿è¡Œæ—¶åº“ | âœ… | âœ… | âœ… | âœ… | âŒ | **âœ…** |
| æ„å»ºå·¥å…· | âœ… | âœ… | âš ï¸ | âœ… | âŒ | **âœ…** |
| æ ‡å‡†åº“ | âœ… | âœ… | âš ï¸ | âœ… | âŒ | **âš ï¸** |
| åŒ…ç®¡ç†å™¨ | âŒ | âš ï¸ | âŒ | âœ… | âŒ | **âŒ** |
| IDEæ”¯æŒ | âœ… | âœ… | âš ï¸ | âœ… | âŒ | **âŒ** |
| **å¯ç”¨æ€§** | 100% | 100% | 60% | 90% | 10% | **50%** |

**è¿›æ­¥**: ä»10%æå‡åˆ°50%ï¼

---

## ğŸ¯ ç°åœ¨èƒ½ä»£æ›¿å—ï¼Ÿï¼ˆæ›´æ–°ï¼‰

### å¯¹æ¯”C
**å¯ç”¨æ€§**: 30%

**å¯ä»¥**:
- âœ… ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶
- âœ… åŸºç¡€åŠŸèƒ½

**ä¸èƒ½**:
- âŒ æ ‡å‡†åº“ä¸å®Œæ•´
- âŒ ç”Ÿæ€ç³»ç»Ÿç¼ºå¤±
- âŒ å·¥å…·é“¾ä¸å®Œæ•´

**ç»“è®º**: âš ï¸ å¯ä»¥ç”¨äºç®€å•é¡¹ç›®ï¼Œä½†ä¸èƒ½å®Œå…¨ä»£æ›¿

### å¯¹æ¯”C++
**å¯ç”¨æ€§**: 20%

**ç»“è®º**: âŒ ä¸èƒ½ä»£æ›¿ï¼ˆC++åŠŸèƒ½å¤ªå¼ºå¤§ï¼‰

### å¯¹æ¯”C3
**å¯ç”¨æ€§**: 40%

**å¯ä»¥**:
- âœ… ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶
- âœ… Resulté”™è¯¯å¤„ç†ï¼ˆè®¾è®¡ï¼‰

**ä¸èƒ½**:
- âŒ æ ‡å‡†åº“ä¸å¦‚C3å®Œæ•´
- âŒ æ¨¡å—ç³»ç»Ÿæœªå®ç°

**ç»“è®º**: âš ï¸ å¯ä»¥ç”¨äºå­¦ä¹ å’Œå°é¡¹ç›®

### å¯¹æ¯”Zig
**å¯ç”¨æ€§**: 25%

**ç»“è®º**: âŒ ä¸èƒ½ä»£æ›¿ï¼ˆZigå¤ªæˆç†Ÿï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] æ”¯æŒå­—ç¬¦ä¸²æ‹¼æ¥
- [ ] æ”¯æŒæ•´æ•°/æµ®ç‚¹æ•°æ‰“å°
- [ ] æ”¯æŒæ•°ç»„å­—é¢é‡
- [ ] æ”¯æŒç»“æ„ä½“å­—é¢é‡
- [ ] æ”¹è¿›é”™è¯¯ä¿¡æ¯

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
- [ ] å®ç°å®Œæ•´çš„æ ‡å‡†åº“è°ƒç”¨
- [ ] æ”¯æŒæ¨¡å—å¯¼å…¥
- [ ] æ”¯æŒæ³›å‹ï¼ˆåŸºç¡€ï¼‰
- [ ] æ”¯æŒæšä¸¾
- [ ] ä¼˜åŒ–ç”Ÿæˆçš„Cä»£ç 

### é•¿æœŸï¼ˆ3ä¸ªæœˆï¼‰
- [ ] LLVMåç«¯ï¼ˆç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼‰
- [ ] åŒ…ç®¡ç†å™¨ï¼ˆchimï¼‰
- [ ] LSPæœåŠ¡å™¨
- [ ] å®Œæ•´çš„å·¥å…·é“¾

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### å®‰è£…è¦æ±‚
- Python 3.7+
- Cç¼–è¯‘å™¨ï¼ˆGCC, Clang, æˆ– MSVCï¼‰

### ç¼–è¯‘ç¨‹åº
```bash
# åŸºæœ¬ç”¨æ³•
python tools/az_build.py source.az -o output

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
python tools/az_build.py source.az -v

# æŸ¥çœ‹å¸®åŠ©
python tools/az_build.py --help
```

### è¿è¡Œç¨‹åº
```bash
# Linux/macOS
./output

# Windows
output.exe
```

---

## ğŸ† é‡Œç¨‹ç¢‘

### âœ… å·²è¾¾æˆ
1. **å¯ä»¥ç¼–è¯‘** - ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
2. **è¿è¡Œæ—¶åº“** - æä¾›åŸºç¡€æ”¯æŒ
3. **æ„å»ºå·¥å…·** - ä¸€é”®ç¼–è¯‘
4. **æ€§èƒ½æå‡** - 18-150å€
5. **ç‹¬ç«‹éƒ¨ç½²** - ä¸éœ€è¦Python

### ğŸ¯ ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘
- **å®Œæ•´æ ‡å‡†åº“** - æ‰€æœ‰stdæ¨¡å—å¯ç”¨
- **æ¨¡å—ç³»ç»Ÿ** - å¤šæ–‡ä»¶ç¼–è¯‘
- **å®ç”¨æ€§** - å¯ä»¥å¼€å‘å®é™…é¡¹ç›®

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### ä»£ç é‡
| ç»„ä»¶ | è¡Œæ•° |
|------|------|
| Cä»£ç ç”Ÿæˆå™¨ | ~400 |
| è¿è¡Œæ—¶åº“ | ~700 |
| æ„å»ºå·¥å…· | ~200 |
| **æ€»è®¡** | **~1300** |

### åŠŸèƒ½æ•°é‡
| ç»„ä»¶ | æ•°é‡ |
|------|------|
| è¿è¡Œæ—¶å‡½æ•° | 40+ |
| æ”¯æŒçš„è¯­æ³• | 20+ |
| ç±»å‹æ˜ å°„ | 10+ |

---

## ğŸ¯ æ€»ç»“

### é‡å¤§çªç ´
**AZè¯­è¨€ä»"ä¸èƒ½ç”¨"å˜æˆäº†"å¯ä»¥ç”¨"ï¼**

**å…³é”®æˆå°±**:
1. âœ… å®ç°äº†ç¼–è¯‘å™¨åç«¯
2. âœ… å®ç°äº†è¿è¡Œæ—¶åº“
3. âœ… å®ç°äº†æ„å»ºå·¥å…·
4. âœ… å¯ä»¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
5. âœ… æ€§èƒ½æå‡100å€

### å½“å‰çŠ¶æ€
- **å¯ç”¨æ€§**: ä»10%æå‡åˆ°50%
- **æ€§èƒ½**: ä»<10%æå‡åˆ°~90%
- **å®šä½**: ä»"å­¦ä¹ é¡¹ç›®"åˆ°"å¯ç”¨è¯­è¨€"

### ä¸‹ä¸€æ­¥
- å®Œå–„æ ‡å‡†åº“
- å®ç°æ¨¡å—ç³»ç»Ÿ
- å¼€å‘åŒ…ç®¡ç†å™¨
- è¾¾åˆ°ç”Ÿäº§å°±ç»ª

---

<div align="center">

**ğŸ‰ AZè¯­è¨€ç¼–è¯‘å™¨åç«¯å®ç°å®Œæˆï¼ğŸ‰**

**è¿™æ˜¯AZè¯­è¨€å‘å±•å²ä¸Šæœ€é‡è¦çš„é‡Œç¨‹ç¢‘ï¼**

**ä»ä»Šå¤©å¼€å§‹ï¼ŒAZæ˜¯ä¸€ä¸ªçœŸæ­£å¯ä»¥ç¼–è¯‘çš„ç¼–ç¨‹è¯­è¨€ï¼**

Made with â¤ï¸ by [JuSanSuiYuan](https://github.com/JuSanSuiYuan)

</div>
